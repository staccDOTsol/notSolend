"use strict";

const React = require("react");
const {
  Box,
  Text
} = require("ink");
const WizardContext = require("../WizardContext");
const {
  useContext,
  useState,
  useEffect,
  useRef
} = require("react");
const {
  default: SelectInput
} = require("ink-select-input");
const chalk = require("chalk");
const {
  default: axios
} = require("axios");
const {
  TOKEN_LIST_URL
} = require("@jup-ag/core");
const {
  default: TextInput
} = require("ink-text-input");
const fs = require("fs");
function Tokens() {
  let isMountedRef = useRef(false);
  const {
    config: {
      strategy: {
        value: strategy
      },
      network: {
        value: network
      },
      tokens: {
        value: tokensValue,
        isSet: tokensIsSet
      }
    },
    configSetValue
  } = useContext(WizardContext);
  const [tokens, setTokens] = useState([]);
  const [autocompleteTokens, setAutocompleteTokens] = useState([]);
  const [tempTokensValue, setTempTokensValue] = useState(tokensValue);
  const handleSubmit = (tokenId, selectedToken) => {
    // go to the next step only if all tokens are set
    let goToNextStep = true;
    tokensIsSet[tokenId] = true;
    tokensValue[tokenId] = {
      symbol: selectedToken.label,
      address: selectedToken.value
    };
    if (strategy === "arbitrage") {
      tokensIsSet.tokenB = true;
    }
    if (strategy === "pingpong" && tokenId === "tokenA") {
      goToNextStep = false;
    }
    configSetValue("tokens", {
      value: tokensValue,
      isSet: tokensIsSet
    }, goToNextStep);
  };
  const handleTokenChange = (tokenId, value) => {
    if (!isMountedRef.current) return;
    const sanitizedValue = value.replace(/[^a-zA-Z0-9]/g, "");
    const filteredTokens = tokens.map(t => ({
      label: t.symbol,
      value: t.address
    })).filter(t => t.label.toLowerCase().includes(sanitizedValue.toLowerCase()));
    if (isMountedRef.current) {
      setAutocompleteTokens(filteredTokens);
      setTempTokensValue({
        ...tempTokensValue,
        [tokenId]: {
          symbol: sanitizedValue
        }
      });
    }
  };
  if (network === "") {
    return /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Text, null, "Plese select ", /*#__PURE__*/React.createElement(Text, {
      color: "magenta"
    }, "network"), " first!"));
  }
  useEffect(() => {
    // check if tokens.json exist
    if (fs.existsSync("./tokens.json")) {
      const tokensFromFile = JSON.parse(fs.readFileSync("./config.json"));
      tokens.tokensFromFile?.length > 0 && setTokens(tokensFromFile);
    } else {
      axios.get(TOKEN_LIST_URL[network]).then(res => {
        isMountedRef.current && setTokens(res.data);
        // save tokens to tokens.json file
        fs.writeFileSync("./temp/tokens.json", JSON.stringify(res.data, null, 2));
      });
    }
  }, []);
  useEffect(() => {
    isMountedRef.current = true;
    return () => isMountedRef.current = false;
  }, []);
  return /*#__PURE__*/React.createElement(Box, {
    flexDirection: "column"
  }, /*#__PURE__*/React.createElement(Text, null, "Set tokens for Your strategy. There is", " ", tokens ? chalk.magenta(tokens.length) : chalk.yellowBright("loading..."), " ", "tokens available."), /*#__PURE__*/React.createElement(Text, {
    color: "gray"
  }, "Type token symbol and use arrows to select"), /*#__PURE__*/React.createElement(Box, {
    margin: 1,
    flexDirection: "column"
  }, /*#__PURE__*/React.createElement(Text, null, "Token A:", " ", !tokensIsSet.tokenA ? /*#__PURE__*/React.createElement(Text, {
    color: "yellowBright"
  }, /*#__PURE__*/React.createElement(TextInput, {
    value: tempTokensValue.tokenA.symbol.toString() || "",
    onChange: tokenSymbol => handleTokenChange("tokenA", tokenSymbol),
    placeholder: "USDC"
  })) : /*#__PURE__*/React.createElement(Text, {
    color: "greenBright",
    bold: true
  }, tokensValue.tokenA.symbol)), /*#__PURE__*/React.createElement(Box, null, !tokensIsSet.tokenA && tempTokensValue?.tokenA?.symbol?.length > 1 && /*#__PURE__*/React.createElement(SelectInput, {
    items: autocompleteTokens,
    limit: 4,
    onSelect: tokenSymbol => handleSubmit("tokenA", tokenSymbol)
  })), strategy === "pingpong" && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Text, null, "Token B:", " ", tokensIsSet.tokenA && !tokensIsSet.tokenB ? /*#__PURE__*/React.createElement(Text, {
    color: "yellowBright"
  }, /*#__PURE__*/React.createElement(TextInput, {
    value: tempTokensValue.tokenB.symbol.toString() || "",
    onChange: tokenSymbol => handleTokenChange("tokenB", tokenSymbol),
    placeholder: "ARB"
  })) : /*#__PURE__*/React.createElement(Text, {
    color: "greenBright",
    bold: true
  }, tokensValue.tokenB.symbol)), /*#__PURE__*/React.createElement(Box, null, !tokensIsSet.tokenB && tempTokensValue.tokenB?.symbol?.length > 1 && /*#__PURE__*/React.createElement(SelectInput, {
    items: autocompleteTokens.filter(t => t.label !== tokensValue.tokenA.symbol),
    limit: 4,
    onSelect: tokenSymbol => handleSubmit("tokenB", tokenSymbol)
  })))));
}
module.exports = Tokens;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJCb3giLCJUZXh0IiwiV2l6YXJkQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsImRlZmF1bHQiLCJTZWxlY3RJbnB1dCIsImNoYWxrIiwiYXhpb3MiLCJUT0tFTl9MSVNUX1VSTCIsIlRleHRJbnB1dCIsImZzIiwiVG9rZW5zIiwiaXNNb3VudGVkUmVmIiwiY29uZmlnIiwic3RyYXRlZ3kiLCJ2YWx1ZSIsIm5ldHdvcmsiLCJ0b2tlbnMiLCJ0b2tlbnNWYWx1ZSIsImlzU2V0IiwidG9rZW5zSXNTZXQiLCJjb25maWdTZXRWYWx1ZSIsInNldFRva2VucyIsImF1dG9jb21wbGV0ZVRva2VucyIsInNldEF1dG9jb21wbGV0ZVRva2VucyIsInRlbXBUb2tlbnNWYWx1ZSIsInNldFRlbXBUb2tlbnNWYWx1ZSIsImhhbmRsZVN1Ym1pdCIsInRva2VuSWQiLCJzZWxlY3RlZFRva2VuIiwiZ29Ub05leHRTdGVwIiwic3ltYm9sIiwibGFiZWwiLCJhZGRyZXNzIiwidG9rZW5CIiwiaGFuZGxlVG9rZW5DaGFuZ2UiLCJjdXJyZW50Iiwic2FuaXRpemVkVmFsdWUiLCJyZXBsYWNlIiwiZmlsdGVyZWRUb2tlbnMiLCJtYXAiLCJ0IiwiZmlsdGVyIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImV4aXN0c1N5bmMiLCJ0b2tlbnNGcm9tRmlsZSIsIkpTT04iLCJwYXJzZSIsInJlYWRGaWxlU3luYyIsImxlbmd0aCIsImdldCIsInRoZW4iLCJyZXMiLCJkYXRhIiwid3JpdGVGaWxlU3luYyIsInN0cmluZ2lmeSIsIm1hZ2VudGEiLCJ5ZWxsb3dCcmlnaHQiLCJ0b2tlbkEiLCJ0b1N0cmluZyIsInRva2VuU3ltYm9sIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlRva2Vucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuY29uc3QgeyBCb3gsIFRleHQgfSA9IHJlcXVpcmUoXCJpbmtcIik7XG5jb25zdCBXaXphcmRDb250ZXh0ID0gcmVxdWlyZShcIi4uL1dpemFyZENvbnRleHRcIik7XG5jb25zdCB7IHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuY29uc3QgeyBkZWZhdWx0OiBTZWxlY3RJbnB1dCB9ID0gcmVxdWlyZShcImluay1zZWxlY3QtaW5wdXRcIik7XG5jb25zdCBjaGFsayA9IHJlcXVpcmUoXCJjaGFsa1wiKTtcbmNvbnN0IHsgZGVmYXVsdDogYXhpb3MgfSA9IHJlcXVpcmUoXCJheGlvc1wiKTtcbmNvbnN0IHsgVE9LRU5fTElTVF9VUkwgfSA9IHJlcXVpcmUoXCJAanVwLWFnL2NvcmVcIik7XG5jb25zdCB7IGRlZmF1bHQ6IFRleHRJbnB1dCB9ID0gcmVxdWlyZShcImluay10ZXh0LWlucHV0XCIpO1xuY29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5cbmZ1bmN0aW9uIFRva2VucygpIHtcblx0bGV0IGlzTW91bnRlZFJlZiA9IHVzZVJlZihmYWxzZSk7XG5cblx0Y29uc3Qge1xuXHRcdGNvbmZpZzoge1xuXHRcdFx0c3RyYXRlZ3k6IHsgdmFsdWU6IHN0cmF0ZWd5IH0sXG5cdFx0XHRuZXR3b3JrOiB7IHZhbHVlOiBuZXR3b3JrIH0sXG5cdFx0XHR0b2tlbnM6IHsgdmFsdWU6IHRva2Vuc1ZhbHVlLCBpc1NldDogdG9rZW5zSXNTZXQgfSxcblx0XHR9LFxuXHRcdGNvbmZpZ1NldFZhbHVlLFxuXHR9ID0gdXNlQ29udGV4dChXaXphcmRDb250ZXh0KTtcblx0Y29uc3QgW3Rva2Vucywgc2V0VG9rZW5zXSA9IHVzZVN0YXRlKFtdKTtcblx0Y29uc3QgW2F1dG9jb21wbGV0ZVRva2Vucywgc2V0QXV0b2NvbXBsZXRlVG9rZW5zXSA9IHVzZVN0YXRlKFtdKTtcblx0Y29uc3QgW3RlbXBUb2tlbnNWYWx1ZSwgc2V0VGVtcFRva2Vuc1ZhbHVlXSA9IHVzZVN0YXRlKHRva2Vuc1ZhbHVlKTtcblxuXHRjb25zdCBoYW5kbGVTdWJtaXQgPSAodG9rZW5JZCwgc2VsZWN0ZWRUb2tlbikgPT4ge1xuXHRcdC8vIGdvIHRvIHRoZSBuZXh0IHN0ZXAgb25seSBpZiBhbGwgdG9rZW5zIGFyZSBzZXRcblx0XHRsZXQgZ29Ub05leHRTdGVwID0gdHJ1ZTtcblxuXHRcdHRva2Vuc0lzU2V0W3Rva2VuSWRdID0gdHJ1ZTtcblx0XHR0b2tlbnNWYWx1ZVt0b2tlbklkXSA9IHtcblx0XHRcdHN5bWJvbDogc2VsZWN0ZWRUb2tlbi5sYWJlbCxcblx0XHRcdGFkZHJlc3M6IHNlbGVjdGVkVG9rZW4udmFsdWUsXG5cdFx0fTtcblxuXHRcdGlmIChzdHJhdGVneSA9PT0gXCJhcmJpdHJhZ2VcIikge1xuXHRcdFx0dG9rZW5zSXNTZXQudG9rZW5CID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoc3RyYXRlZ3kgPT09IFwicGluZ3BvbmdcIiAmJiB0b2tlbklkID09PSBcInRva2VuQVwiKSB7XG5cdFx0XHRnb1RvTmV4dFN0ZXAgPSBmYWxzZTtcblx0XHR9XG5cblx0XHRjb25maWdTZXRWYWx1ZShcblx0XHRcdFwidG9rZW5zXCIsXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiB0b2tlbnNWYWx1ZSxcblx0XHRcdFx0aXNTZXQ6IHRva2Vuc0lzU2V0LFxuXHRcdFx0fSxcblx0XHRcdGdvVG9OZXh0U3RlcFxuXHRcdCk7XG5cdH07XG5cblx0Y29uc3QgaGFuZGxlVG9rZW5DaGFuZ2UgPSAodG9rZW5JZCwgdmFsdWUpID0+IHtcblx0XHRpZiAoIWlzTW91bnRlZFJlZi5jdXJyZW50KSByZXR1cm47XG5cdFx0Y29uc3Qgc2FuaXRpemVkVmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywgXCJcIik7XG5cdFx0Y29uc3QgZmlsdGVyZWRUb2tlbnMgPSB0b2tlbnNcblx0XHRcdC5tYXAoKHQpID0+ICh7XG5cdFx0XHRcdGxhYmVsOiB0LnN5bWJvbCxcblx0XHRcdFx0dmFsdWU6IHQuYWRkcmVzcyxcblx0XHRcdH0pKVxuXHRcdFx0LmZpbHRlcigodCkgPT5cblx0XHRcdFx0dC5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNhbml0aXplZFZhbHVlLnRvTG93ZXJDYXNlKCkpXG5cdFx0XHQpO1xuXHRcdGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuXHRcdFx0c2V0QXV0b2NvbXBsZXRlVG9rZW5zKGZpbHRlcmVkVG9rZW5zKTtcblx0XHRcdHNldFRlbXBUb2tlbnNWYWx1ZSh7XG5cdFx0XHRcdC4uLnRlbXBUb2tlbnNWYWx1ZSxcblx0XHRcdFx0W3Rva2VuSWRdOiB7XG5cdFx0XHRcdFx0c3ltYm9sOiBzYW5pdGl6ZWRWYWx1ZSxcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHRpZiAobmV0d29yayA9PT0gXCJcIikge1xuXHRcdHJldHVybiAoXG5cdFx0XHQ8Qm94PlxuXHRcdFx0XHQ8VGV4dD5cblx0XHRcdFx0XHRQbGVzZSBzZWxlY3QgPFRleHQgY29sb3I9XCJtYWdlbnRhXCI+bmV0d29yazwvVGV4dD4gZmlyc3QhXG5cdFx0XHRcdDwvVGV4dD5cblx0XHRcdDwvQm94PlxuXHRcdCk7XG5cdH1cblxuXHR1c2VFZmZlY3QoKCkgPT4ge1xuXHRcdC8vIGNoZWNrIGlmIHRva2Vucy5qc29uIGV4aXN0XG5cdFx0aWYgKGZzLmV4aXN0c1N5bmMoXCIuL3Rva2Vucy5qc29uXCIpKSB7XG5cdFx0XHRjb25zdCB0b2tlbnNGcm9tRmlsZSA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKFwiLi9jb25maWcuanNvblwiKSk7XG5cdFx0XHR0b2tlbnMudG9rZW5zRnJvbUZpbGU/Lmxlbmd0aCA+IDAgJiYgc2V0VG9rZW5zKHRva2Vuc0Zyb21GaWxlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXhpb3MuZ2V0KFRPS0VOX0xJU1RfVVJMW25ldHdvcmtdKS50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0aXNNb3VudGVkUmVmLmN1cnJlbnQgJiYgc2V0VG9rZW5zKHJlcy5kYXRhKTtcblx0XHRcdFx0Ly8gc2F2ZSB0b2tlbnMgdG8gdG9rZW5zLmpzb24gZmlsZVxuXHRcdFx0XHRmcy53cml0ZUZpbGVTeW5jKFxuXHRcdFx0XHRcdFwiLi90ZW1wL3Rva2Vucy5qc29uXCIsXG5cdFx0XHRcdFx0SlNPTi5zdHJpbmdpZnkocmVzLmRhdGEsIG51bGwsIDIpXG5cdFx0XHRcdCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sIFtdKTtcblx0dXNlRWZmZWN0KCgpID0+IHtcblx0XHRpc01vdW50ZWRSZWYuY3VycmVudCA9IHRydWU7XG5cdFx0cmV0dXJuICgpID0+IChpc01vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlKTtcblx0fSwgW10pO1xuXG5cdHJldHVybiAoXG5cdFx0PEJveCBmbGV4RGlyZWN0aW9uPVwiY29sdW1uXCI+XG5cdFx0XHQ8VGV4dD5cblx0XHRcdFx0U2V0IHRva2VucyBmb3IgWW91ciBzdHJhdGVneS4gVGhlcmUgaXN7XCIgXCJ9XG5cdFx0XHRcdHt0b2tlbnNcblx0XHRcdFx0XHQ/IGNoYWxrLm1hZ2VudGEodG9rZW5zLmxlbmd0aClcblx0XHRcdFx0XHQ6IGNoYWxrLnllbGxvd0JyaWdodChcImxvYWRpbmcuLi5cIil9e1wiIFwifVxuXHRcdFx0XHR0b2tlbnMgYXZhaWxhYmxlLlxuXHRcdFx0PC9UZXh0PlxuXHRcdFx0PFRleHQgY29sb3I9XCJncmF5XCI+VHlwZSB0b2tlbiBzeW1ib2wgYW5kIHVzZSBhcnJvd3MgdG8gc2VsZWN0PC9UZXh0PlxuXHRcdFx0PEJveCBtYXJnaW49ezF9IGZsZXhEaXJlY3Rpb249XCJjb2x1bW5cIj5cblx0XHRcdFx0PFRleHQ+XG5cdFx0XHRcdFx0VG9rZW4gQTp7XCIgXCJ9XG5cdFx0XHRcdFx0eyF0b2tlbnNJc1NldC50b2tlbkEgPyAoXG5cdFx0XHRcdFx0XHQ8VGV4dCBjb2xvcj1cInllbGxvd0JyaWdodFwiPlxuXHRcdFx0XHRcdFx0XHQ8VGV4dElucHV0XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU9e3RlbXBUb2tlbnNWYWx1ZS50b2tlbkEuc3ltYm9sLnRvU3RyaW5nKCkgfHwgXCJcIn1cblx0XHRcdFx0XHRcdFx0XHRvbkNoYW5nZT17KHRva2VuU3ltYm9sKSA9PlxuXHRcdFx0XHRcdFx0XHRcdFx0aGFuZGxlVG9rZW5DaGFuZ2UoXCJ0b2tlbkFcIiwgdG9rZW5TeW1ib2wpXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyPVwiVVNEQ1wiXG5cdFx0XHRcdFx0XHRcdC8+XG5cdFx0XHRcdFx0XHQ8L1RleHQ+XG5cdFx0XHRcdFx0KSA6IChcblx0XHRcdFx0XHRcdDxUZXh0IGNvbG9yPVwiZ3JlZW5CcmlnaHRcIiBib2xkPlxuXHRcdFx0XHRcdFx0XHR7dG9rZW5zVmFsdWUudG9rZW5BLnN5bWJvbH1cblx0XHRcdFx0XHRcdDwvVGV4dD5cblx0XHRcdFx0XHQpfVxuXHRcdFx0XHQ8L1RleHQ+XG5cblx0XHRcdFx0PEJveD5cblx0XHRcdFx0XHR7IXRva2Vuc0lzU2V0LnRva2VuQSAmJlxuXHRcdFx0XHRcdFx0dGVtcFRva2Vuc1ZhbHVlPy50b2tlbkE/LnN5bWJvbD8ubGVuZ3RoID4gMSAmJiAoXG5cdFx0XHRcdFx0XHRcdDxTZWxlY3RJbnB1dFxuXHRcdFx0XHRcdFx0XHRcdGl0ZW1zPXthdXRvY29tcGxldGVUb2tlbnN9XG5cdFx0XHRcdFx0XHRcdFx0bGltaXQ9ezR9XG5cdFx0XHRcdFx0XHRcdFx0b25TZWxlY3Q9eyh0b2tlblN5bWJvbCkgPT4gaGFuZGxlU3VibWl0KFwidG9rZW5BXCIsIHRva2VuU3ltYm9sKX1cblx0XHRcdFx0XHRcdFx0Lz5cblx0XHRcdFx0XHRcdCl9XG5cdFx0XHRcdDwvQm94PlxuXG5cdFx0XHRcdHtzdHJhdGVneSA9PT0gXCJwaW5ncG9uZ1wiICYmIChcblx0XHRcdFx0XHQ8PlxuXHRcdFx0XHRcdFx0PFRleHQ+XG5cdFx0XHRcdFx0XHRcdFRva2VuIEI6e1wiIFwifVxuXHRcdFx0XHRcdFx0XHR7dG9rZW5zSXNTZXQudG9rZW5BICYmICF0b2tlbnNJc1NldC50b2tlbkIgPyAoXG5cdFx0XHRcdFx0XHRcdFx0PFRleHQgY29sb3I9XCJ5ZWxsb3dCcmlnaHRcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxUZXh0SW5wdXRcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU9e3RlbXBUb2tlbnNWYWx1ZS50b2tlbkIuc3ltYm9sLnRvU3RyaW5nKCkgfHwgXCJcIn1cblx0XHRcdFx0XHRcdFx0XHRcdFx0b25DaGFuZ2U9eyh0b2tlblN5bWJvbCkgPT5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoYW5kbGVUb2tlbkNoYW5nZShcInRva2VuQlwiLCB0b2tlblN5bWJvbClcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRwbGFjZWhvbGRlcj1cIkFSQlwiXG5cdFx0XHRcdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdFx0XHRcdDwvVGV4dD5cblx0XHRcdFx0XHRcdFx0KSA6IChcblx0XHRcdFx0XHRcdFx0XHQ8VGV4dCBjb2xvcj1cImdyZWVuQnJpZ2h0XCIgYm9sZD5cblx0XHRcdFx0XHRcdFx0XHRcdHt0b2tlbnNWYWx1ZS50b2tlbkIuc3ltYm9sfVxuXHRcdFx0XHRcdFx0XHRcdDwvVGV4dD5cblx0XHRcdFx0XHRcdFx0KX1cblx0XHRcdFx0XHRcdDwvVGV4dD5cblx0XHRcdFx0XHRcdDxCb3g+XG5cdFx0XHRcdFx0XHRcdHshdG9rZW5zSXNTZXQudG9rZW5CICYmXG5cdFx0XHRcdFx0XHRcdFx0dGVtcFRva2Vuc1ZhbHVlLnRva2VuQj8uc3ltYm9sPy5sZW5ndGggPiAxICYmIChcblx0XHRcdFx0XHRcdFx0XHRcdDxTZWxlY3RJbnB1dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtcz17YXV0b2NvbXBsZXRlVG9rZW5zLmZpbHRlcihcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQodCkgPT4gdC5sYWJlbCAhPT0gdG9rZW5zVmFsdWUudG9rZW5BLnN5bWJvbFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQpfVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRsaW1pdD17NH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0b25TZWxlY3Q9eyh0b2tlblN5bWJvbCkgPT5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoYW5kbGVTdWJtaXQoXCJ0b2tlbkJcIiwgdG9rZW5TeW1ib2wpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdC8+XG5cdFx0XHRcdFx0XHRcdFx0KX1cblx0XHRcdFx0XHRcdDwvQm94PlxuXHRcdFx0XHRcdDwvPlxuXHRcdFx0XHQpfVxuXHRcdFx0PC9Cb3g+XG5cdFx0PC9Cb3g+XG5cdCk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IFRva2VucztcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWixNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDOUIsTUFBTTtFQUFFQyxHQUFHO0VBQUVDO0FBQUssQ0FBQyxHQUFHRixPQUFPLENBQUMsS0FBSyxDQUFDO0FBQ3BDLE1BQU1HLGFBQWEsR0FBR0gsT0FBTyxDQUFDLGtCQUFrQixDQUFDO0FBQ2pELE1BQU07RUFBRUksVUFBVTtFQUFFQyxRQUFRO0VBQUVDLFNBQVM7RUFBRUM7QUFBTyxDQUFDLEdBQUdQLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDcEUsTUFBTTtFQUFFUSxPQUFPLEVBQUVDO0FBQVksQ0FBQyxHQUFHVCxPQUFPLENBQUMsa0JBQWtCLENBQUM7QUFDNUQsTUFBTVUsS0FBSyxHQUFHVixPQUFPLENBQUMsT0FBTyxDQUFDO0FBQzlCLE1BQU07RUFBRVEsT0FBTyxFQUFFRztBQUFNLENBQUMsR0FBR1gsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUMzQyxNQUFNO0VBQUVZO0FBQWUsQ0FBQyxHQUFHWixPQUFPLENBQUMsY0FBYyxDQUFDO0FBQ2xELE1BQU07RUFBRVEsT0FBTyxFQUFFSztBQUFVLENBQUMsR0FBR2IsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3hELE1BQU1j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
const React = require("react");
const {
  Box,
  Text
} = require("ink");
const {
  useContext,
  useState,
  useRef,
  useEffect
} = require("react");
const WizardContext = require("../WizardContext");
const {
  default: TextInput
} = require("ink-text-input");
const chalk = require("chalk");
const {
  default: SelectInput
} = require("ink-select-input");
const TRADING_SIZE_STRATEGIES = [{
  label: "cumulative",
  value: "cumulative"
}, {
  label: "fixed",
  value: "fixed"
}];
const Indicator = ({
  label,
  value
}) => {
  const {
    config: {
      "trading size": {
        value: selectedValue
      }
    }
  } = useContext(WizardContext);
  const isSelected = value === selectedValue.strategy;
  return /*#__PURE__*/React.createElement(Text, null, chalk[isSelected ? "greenBright" : "white"](`${label}`));
};
function TradingSize() {
  let isMountedRef = useRef(false);
  const {
    config: {
      tokens: {
        value: tokensValue
      },
      "trading size": {
        value: tradingSizeValue
      }
    },
    configSetValue
  } = useContext(WizardContext);
  const [tradingSize, setTradingSize] = useState(tradingSizeValue.value);
  const [inputBorderColor, setInputBorderColor] = useState("gray");
  const handleTradingSizeStrategySelect = selected => {
    configSetValue("trading size", {
      value: {
        strategy: selected.value,
        value: tradingSize
      }
    });
  };
  const handleTradingSizeChange = value => {
    if (!isMountedRef.current) return;
    const badChars = /[^0-9.]/g;
    badChars.test(value) ? setInputBorderColor("red") : setInputBorderColor("gray");
    const sanitizedValue = value.replace(badChars, "");
    setTimeout(() => isMountedRef.current && setInputBorderColor("gray"), 100);
    setTradingSize(sanitizedValue);
  };
  useEffect(() => {
    isMountedRef.current = true;
    return () => isMountedRef.current = false;
  }, []);
  return /*#__PURE__*/React.createElement(Box, {
    flexDirection: "column"
  }, /*#__PURE__*/React.createElement(Text, null, "Set ", /*#__PURE__*/React.createElement(Text, {
    color: "#cdadff"
  }, "trading size"), " strategy:"), /*#__PURE__*/React.createElement(Box, {
    margin: 1
  }, /*#__PURE__*/React.createElement(SelectInput, {
    items: TRADING_SIZE_STRATEGIES,
    onSelect: handleTradingSizeStrategySelect,
    itemComponent: Indicator
  })), /*#__PURE__*/React.createElement(Box, {
    flexDirection: "row",
    alignItems: "center"
  }, /*#__PURE__*/React.createElement(Text, null, "Trading Size:"), /*#__PURE__*/React.createElement(Box, {
    borderStyle: "round",
    borderColor: inputBorderColor,
    marginLeft: 1
  }, /*#__PURE__*/React.createElement(TextInput, {
    value: tradingSize || "",
    placeholder: "0.0",
    onChange: handleTradingSizeChange
    // onSubmit={(value) => handleSubmit("percent", value)}
  }), /*#__PURE__*/React.createElement(Text, {
    color: "gray"
  }, " ", tokensValue.tokenA.symbol))));
}
module.exports = TradingSize;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJCb3giLCJUZXh0IiwidXNlQ29udGV4dCIsInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiV2l6YXJkQ29udGV4dCIsImRlZmF1bHQiLCJUZXh0SW5wdXQiLCJjaGFsayIsIlNlbGVjdElucHV0IiwiVFJBRElOR19TSVpFX1NUUkFURUdJRVMiLCJsYWJlbCIsInZhbHVlIiwiSW5kaWNhdG9yIiwiY29uZmlnIiwic2VsZWN0ZWRWYWx1ZSIsImlzU2VsZWN0ZWQiLCJzdHJhdGVneSIsIlRyYWRpbmdTaXplIiwiaXNNb3VudGVkUmVmIiwidG9rZW5zIiwidG9rZW5zVmFsdWUiLCJ0cmFkaW5nU2l6ZVZhbHVlIiwiY29uZmlnU2V0VmFsdWUiLCJ0cmFkaW5nU2l6ZSIsInNldFRyYWRpbmdTaXplIiwiaW5wdXRCb3JkZXJDb2xvciIsInNldElucHV0Qm9yZGVyQ29sb3IiLCJoYW5kbGVUcmFkaW5nU2l6ZVN0cmF0ZWd5U2VsZWN0Iiwic2VsZWN0ZWQiLCJoYW5kbGVUcmFkaW5nU2l6ZUNoYW5nZSIsImN1cnJlbnQiLCJiYWRDaGFycyIsInRlc3QiLCJzYW5pdGl6ZWRWYWx1ZSIsInJlcGxhY2UiLCJzZXRUaW1lb3V0IiwidG9rZW5BIiwic3ltYm9sIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlRyYWRpbmdTaXplLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuY29uc3QgeyBCb3gsIFRleHQgfSA9IHJlcXVpcmUoXCJpbmtcIik7XG5jb25zdCB7IHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuY29uc3QgV2l6YXJkQ29udGV4dCA9IHJlcXVpcmUoXCIuLi9XaXphcmRDb250ZXh0XCIpO1xuY29uc3QgeyBkZWZhdWx0OiBUZXh0SW5wdXQgfSA9IHJlcXVpcmUoXCJpbmstdGV4dC1pbnB1dFwiKTtcbmNvbnN0IGNoYWxrID0gcmVxdWlyZShcImNoYWxrXCIpO1xuY29uc3QgeyBkZWZhdWx0OiBTZWxlY3RJbnB1dCB9ID0gcmVxdWlyZShcImluay1zZWxlY3QtaW5wdXRcIik7XG5cbmNvbnN0IFRSQURJTkdfU0laRV9TVFJBVEVHSUVTID0gW1xuXHR7IGxhYmVsOiBcImN1bXVsYXRpdmVcIiwgdmFsdWU6IFwiY3VtdWxhdGl2ZVwiIH0sXG5cdHsgbGFiZWw6IFwiZml4ZWRcIiwgdmFsdWU6IFwiZml4ZWRcIiB9LFxuXTtcblxuY29uc3QgSW5kaWNhdG9yID0gKHsgbGFiZWwsIHZhbHVlIH0pID0+IHtcblx0Y29uc3Qge1xuXHRcdGNvbmZpZzoge1xuXHRcdFx0XCJ0cmFkaW5nIHNpemVcIjogeyB2YWx1ZTogc2VsZWN0ZWRWYWx1ZSB9LFxuXHRcdH0sXG5cdH0gPSB1c2VDb250ZXh0KFdpemFyZENvbnRleHQpO1xuXG5cdGNvbnN0IGlzU2VsZWN0ZWQgPSB2YWx1ZSA9PT0gc2VsZWN0ZWRWYWx1ZS5zdHJhdGVneTtcblxuXHRyZXR1cm4gPFRleHQ+e2NoYWxrW2lzU2VsZWN0ZWQgPyBcImdyZWVuQnJpZ2h0XCIgOiBcIndoaXRlXCJdKGAke2xhYmVsfWApfTwvVGV4dD47XG59O1xuXG5mdW5jdGlvbiBUcmFkaW5nU2l6ZSgpIHtcblx0bGV0IGlzTW91bnRlZFJlZiA9IHVzZVJlZihmYWxzZSk7XG5cblx0Y29uc3Qge1xuXHRcdGNvbmZpZzoge1xuXHRcdFx0dG9rZW5zOiB7IHZhbHVlOiB0b2tlbnNWYWx1ZSB9LFxuXHRcdFx0XCJ0cmFkaW5nIHNpemVcIjogeyB2YWx1ZTogdHJhZGluZ1NpemVWYWx1ZSB9LFxuXHRcdH0sXG5cdFx0Y29uZmlnU2V0VmFsdWUsXG5cdH0gPSB1c2VDb250ZXh0KFdpemFyZENvbnRleHQpO1xuXG5cdGNvbnN0IFt0cmFkaW5nU2l6ZSwgc2V0VHJhZGluZ1NpemVdID0gdXNlU3RhdGUodHJhZGluZ1NpemVWYWx1ZS52YWx1ZSk7XG5cdGNvbnN0IFtpbnB1dEJvcmRlckNvbG9yLCBzZXRJbnB1dEJvcmRlckNvbG9yXSA9IHVzZVN0YXRlKFwiZ3JheVwiKTtcblxuXHRjb25zdCBoYW5kbGVUcmFkaW5nU2l6ZVN0cmF0ZWd5U2VsZWN0ID0gKHNlbGVjdGVkKSA9PiB7XG5cdFx0Y29uZmlnU2V0VmFsdWUoXCJ0cmFkaW5nIHNpemVcIiwge1xuXHRcdFx0dmFsdWU6IHtcblx0XHRcdFx0c3RyYXRlZ3k6IHNlbGVjdGVkLnZhbHVlLFxuXHRcdFx0XHR2YWx1ZTogdHJhZGluZ1NpemUsXG5cdFx0XHR9LFxuXHRcdH0pO1xuXHR9O1xuXG5cdGNvbnN0IGhhbmRsZVRyYWRpbmdTaXplQ2hhbmdlID0gKHZhbHVlKSA9PiB7XG5cdFx0aWYgKCFpc01vdW50ZWRSZWYuY3VycmVudCkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgYmFkQ2hhcnMgPSAvW14wLTkuXS9nO1xuXHRcdGJhZENoYXJzLnRlc3QodmFsdWUpXG5cdFx0XHQ/IHNldElucHV0Qm9yZGVyQ29sb3IoXCJyZWRcIilcblx0XHRcdDogc2V0SW5wdXRCb3JkZXJDb2xvcihcImdyYXlcIik7XG5cdFx0Y29uc3Qgc2FuaXRpemVkVmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGJhZENoYXJzLCBcIlwiKTtcblx0XHRzZXRUaW1lb3V0KCgpID0+IGlzTW91bnRlZFJlZi5jdXJyZW50ICYmIHNldElucHV0Qm9yZGVyQ29sb3IoXCJncmF5XCIpLCAxMDApO1xuXHRcdHNldFRyYWRpbmdTaXplKHNhbml0aXplZFZhbHVlKTtcblx0fTtcblxuXHR1c2VFZmZlY3QoKCkgPT4ge1xuXHRcdGlzTW91bnRlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcblx0XHRyZXR1cm4gKCkgPT4gKGlzTW91bnRlZFJlZi5jdXJyZW50ID0gZmFsc2UpO1xuXHR9LCBbXSk7XG5cblx0cmV0dXJuIChcblx0XHQ8Qm94IGZsZXhEaXJlY3Rpb249XCJjb2x1bW5cIj5cblx0XHRcdDxUZXh0PlxuXHRcdFx0XHRTZXQgPFRleHQgY29sb3I9XCIjY2RhZGZmXCI+dHJhZGluZyBzaXplPC9UZXh0PiBzdHJhdGVneTpcblx0XHRcdDwvVGV4dD5cblx0XHRcdDxCb3ggbWFyZ2luPXsxfT5cblx0XHRcdFx0PFNlbGVjdElucHV0XG5cdFx0XHRcdFx0aXRlbXM9e1RSQURJTkdfU0laRV9TVFJBVEVHSUVTfVxuXHRcdFx0XHRcdG9uU2VsZWN0PXtoYW5kbGVUcmFkaW5nU2l6ZVN0cmF0ZWd5U2VsZWN0fVxuXHRcdFx0XHRcdGl0ZW1Db21wb25lbnQ9e0luZGljYXRvcn1cblx0XHRcdFx0Lz5cblx0XHRcdDwvQm94PlxuXHRcdFx0PEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiPlxuXHRcdFx0XHQ8VGV4dD5UcmFkaW5nIFNpemU6PC9UZXh0PlxuXHRcdFx0XHQ8Qm94IGJvcmRlclN0eWxlPVwicm91bmRcIiBib3JkZXJDb2xvcj17aW5wdXRCb3JkZXJDb2xvcn0gbWFyZ2luTGVmdD17MX0+XG5cdFx0XHRcdFx0PFRleHRJbnB1dFxuXHRcdFx0XHRcdFx0dmFsdWU9e3RyYWRpbmdTaXplIHx8IFwiXCJ9XG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlcj1cIjAuMFwiXG5cdFx0XHRcdFx0XHRvbkNoYW5nZT17aGFuZGxlVHJhZGluZ1NpemVDaGFuZ2V9XG5cdFx0XHRcdFx0XHQvLyBvblN1Ym1pdD17KHZhbHVlKSA9PiBoYW5kbGVTdWJtaXQoXCJwZXJjZW50XCIsIHZhbHVlKX1cblx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdDxUZXh0IGNvbG9yPVwiZ3JheVwiPiB7dG9rZW5zVmFsdWUudG9rZW5BLnN5bWJvbH08L1RleHQ+XG5cdFx0XHRcdDwvQm94PlxuXHRcdFx0PC9Cb3g+XG5cdFx0PC9Cb3g+XG5cdCk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IFRyYWRpbmdTaXplO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDOUIsTUFBTTtFQUFFQyxHQUFHO0VBQUVDO0FBQUssQ0FBQyxH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
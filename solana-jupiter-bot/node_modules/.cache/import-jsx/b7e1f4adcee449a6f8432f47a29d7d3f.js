"use strict";

const React = require("react");
const {
  Box,
  Text
} = require("ink");
const WizardContext = require("../WizardContext");
const {
  useContext,
  useState,
  useEffect,
  useRef
} = require("react");
const {
  default: SelectInput
} = require("ink-select-input");
const chalk = require("chalk");
const {
  default: axios
} = require("axios");
const {
  TOKEN_LIST_URL
} = require("@jup-ag/core");
const {
  default: TextInput
} = require("ink-text-input");
const fs = require("fs");
function Tokens() {
  let isMountedRef = useRef(false);
  const {
    config: {
      strategy: {
        value: strategy
      },
      network: {
        value: network
      },
      tokens: {
        value: tokensValue,
        isSet: tokensIsSet
      }
    },
    configSetValue
  } = useContext(WizardContext);
  const [tokens, setTokens] = useState([]);
  const [autocompleteTokens, setAutocompleteTokens] = useState([]);
  const [tempTokensValue, setTempTokensValue] = useState(tokensValue);
  const handleSubmit = (tokenId, selectedToken) => {
    // go to the next step only if all tokens are set
    let goToNextStep = true;
    tokensIsSet[tokenId] = true;
    tokensValue[tokenId] = {
      symbol: selectedToken.label,
      address: selectedToken.value
    };
    if (strategy === "arbitrage") {
      tokensIsSet.tokenB = true;
    }
    if (strategy === "pingpong" && tokenId === "tokenA") {
      goToNextStep = false;
    }
    console.log("tokens", {
      value: tokensValue,
      isSet: tokensIsSet
    });
    configSetValue("tokens", {
      value: tokensValue,
      isSet: tokensIsSet
    }, goToNextStep);
  };
  const handleTokenChange = (tokenId, value) => {
    if (!isMountedRef.current) return;
    const sanitizedValue = value.replace(/[^a-zA-Z0-9]/g, "");
    const filteredTokens = tokens.map(t => ({
      label: t.symbol,
      value: t.address
    })).filter(t => t.label.toLowerCase().includes(sanitizedValue.toLowerCase()));
    if (isMountedRef.current) {
      setAutocompleteTokens(filteredTokens);
      setTempTokensValue({
        ...tempTokensValue,
        [tokenId]: {
          symbol: sanitizedValue
        }
      });
    }
  };
  if (network === "") {
    return /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Text, null, "Plese select ", /*#__PURE__*/React.createElement(Text, {
      color: "magenta"
    }, "network"), " first!"));
  }
  useEffect(() => {
    // check if tokens.json exist
    if (fs.existsSync("./tokens.json")) {
      const tokensFromFile = JSON.parse(fs.readFileSync("./config.json"));
      tokens.tokensFromFile?.length > 0 && setTokens(tokensFromFile);
    } else {
      axios.get(TOKEN_LIST_URL[network]).then(res => {
        isMountedRef.current && setTokens(res.data);
        // save tokens to tokens.json file
        fs.writeFileSync("./temp/tokens.json", JSON.stringify(res.data, null, 2));
      });
    }
  }, []);
  useEffect(() => {
    isMountedRef.current = true;
    return () => isMountedRef.current = false;
  }, []);
  return /*#__PURE__*/React.createElement(Box, {
    flexDirection: "column"
  }, /*#__PURE__*/React.createElement(Text, null, "Set tokens for Your strategy. There is", " ", tokens ? chalk.magenta(tokens.length) : chalk.yellowBright("loading..."), " ", "tokens available."), /*#__PURE__*/React.createElement(Text, {
    color: "gray"
  }, "Type token symbol and use arrows to select"), /*#__PURE__*/React.createElement(Box, {
    margin: 1,
    flexDirection: "column"
  }, /*#__PURE__*/React.createElement(Text, null, "Token A:", " ", !tokensIsSet.tokenA ? /*#__PURE__*/React.createElement(Text, {
    color: "yellowBright"
  }, /*#__PURE__*/React.createElement(TextInput, {
    value: tempTokensValue.tokenA.symbol.toString() || "",
    onChange: tokenSymbol => handleTokenChange("tokenA", tokenSymbol),
    placeholder: "USDC"
  })) : /*#__PURE__*/React.createElement(Text, {
    color: "greenBright",
    bold: true
  }, tokensValue.tokenA.symbol)), /*#__PURE__*/React.createElement(Box, null, !tokensIsSet.tokenA && tempTokensValue?.tokenA?.symbol?.length > 1 && /*#__PURE__*/React.createElement(SelectInput, {
    items: autocompleteTokens,
    limit: 4,
    onSelect: tokenSymbol => handleSubmit("tokenA", tokenSymbol)
  })), strategy === "pingpong" && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Text, null, "Token B:", " ", tokensIsSet.tokenA && !tokensIsSet.tokenB ? /*#__PURE__*/React.createElement(Text, {
    color: "yellowBright"
  }, /*#__PURE__*/React.createElement(TextInput, {
    value: tempTokensValue.tokenB.symbol.toString() || "",
    onChange: tokenSymbol => handleTokenChange("tokenB", tokenSymbol),
    placeholder: "ARB"
  })) : /*#__PURE__*/React.createElement(Text, {
    color: "greenBright",
    bold: true
  }, tokensValue.tokenB.symbol)), /*#__PURE__*/React.createElement(Box, null, !tokensIsSet.tokenB && tempTokensValue.tokenB?.symbol?.length > 1 && /*#__PURE__*/React.createElement(SelectInput, {
    items: autocompleteTokens.filter(t => t.label !== tokensValue.tokenA.symbol),
    limit: 4,
    onSelect: tokenSymbol => handleSubmit("tokenB", tokenSymbol)
  })))));
}
module.exports = Tokens;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJCb3giLCJUZXh0IiwiV2l6YXJkQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsImRlZmF1bHQiLCJTZWxlY3RJbnB1dCIsImNoYWxrIiwiYXhpb3MiLCJUT0tFTl9MSVNUX1VSTCIsIlRleHRJbnB1dCIsImZzIiwiVG9rZW5zIiwiaXNNb3VudGVkUmVmIiwiY29uZmlnIiwic3RyYXRlZ3kiLCJ2YWx1ZSIsIm5ldHdvcmsiLCJ0b2tlbnMiLCJ0b2tlbnNWYWx1ZSIsImlzU2V0IiwidG9rZW5zSXNTZXQiLCJjb25maWdTZXRWYWx1ZSIsInNldFRva2VucyIsImF1dG9jb21wbGV0ZVRva2VucyIsInNldEF1dG9jb21wbGV0ZVRva2VucyIsInRlbXBUb2tlbnNWYWx1ZSIsInNldFRlbXBUb2tlbnNWYWx1ZSIsImhhbmRsZVN1Ym1pdCIsInRva2VuSWQiLCJzZWxlY3RlZFRva2VuIiwiZ29Ub05leHRTdGVwIiwic3ltYm9sIiwibGFiZWwiLCJhZGRyZXNzIiwidG9rZW5CIiwiY29uc29sZSIsImxvZyIsImhhbmRsZVRva2VuQ2hhbmdlIiwiY3VycmVudCIsInNhbml0aXplZFZhbHVlIiwicmVwbGFjZSIsImZpbHRlcmVkVG9rZW5zIiwibWFwIiwidCIsImZpbHRlciIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJleGlzdHNTeW5jIiwidG9rZW5zRnJvbUZpbGUiLCJKU09OIiwicGFyc2UiLCJyZWFkRmlsZVN5bmMiLCJsZW5ndGgiLCJnZXQiLCJ0aGVuIiwicmVzIiwiZGF0YSIsIndyaXRlRmlsZVN5bmMiLCJzdHJpbmdpZnkiLCJtYWdlbnRhIiwieWVsbG93QnJpZ2h0IiwidG9rZW5BIiwidG9TdHJpbmciLCJ0b2tlblN5bWJvbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJUb2tlbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoXCJyZWFjdFwiKTtcbmNvbnN0IHsgQm94LCBUZXh0IH0gPSByZXF1aXJlKFwiaW5rXCIpO1xuY29uc3QgV2l6YXJkQ29udGV4dCA9IHJlcXVpcmUoXCIuLi9XaXphcmRDb250ZXh0XCIpO1xuY29uc3QgeyB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSA9IHJlcXVpcmUoXCJyZWFjdFwiKTtcbmNvbnN0IHsgZGVmYXVsdDogU2VsZWN0SW5wdXQgfSA9IHJlcXVpcmUoXCJpbmstc2VsZWN0LWlucHV0XCIpO1xuY29uc3QgY2hhbGsgPSByZXF1aXJlKFwiY2hhbGtcIik7XG5jb25zdCB7IGRlZmF1bHQ6IGF4aW9zIH0gPSByZXF1aXJlKFwiYXhpb3NcIik7XG5jb25zdCB7IFRPS0VOX0xJU1RfVVJMIH0gPSByZXF1aXJlKFwiQGp1cC1hZy9jb3JlXCIpO1xuY29uc3QgeyBkZWZhdWx0OiBUZXh0SW5wdXQgfSA9IHJlcXVpcmUoXCJpbmstdGV4dC1pbnB1dFwiKTtcbmNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5mdW5jdGlvbiBUb2tlbnMoKSB7XG5cdGxldCBpc01vdW50ZWRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuXG5cdGNvbnN0IHtcblx0XHRjb25maWc6IHtcblx0XHRcdHN0cmF0ZWd5OiB7IHZhbHVlOiBzdHJhdGVneSB9LFxuXHRcdFx0bmV0d29yazogeyB2YWx1ZTogbmV0d29yayB9LFxuXHRcdFx0dG9rZW5zOiB7IHZhbHVlOiB0b2tlbnNWYWx1ZSwgaXNTZXQ6IHRva2Vuc0lzU2V0IH0sXG5cdFx0fSxcblx0XHRjb25maWdTZXRWYWx1ZSxcblx0fSA9IHVzZUNvbnRleHQoV2l6YXJkQ29udGV4dCk7XG5cdGNvbnN0IFt0b2tlbnMsIHNldFRva2Vuc10gPSB1c2VTdGF0ZShbXSk7XG5cdGNvbnN0IFthdXRvY29tcGxldGVUb2tlbnMsIHNldEF1dG9jb21wbGV0ZVRva2Vuc10gPSB1c2VTdGF0ZShbXSk7XG5cdGNvbnN0IFt0ZW1wVG9rZW5zVmFsdWUsIHNldFRlbXBUb2tlbnNWYWx1ZV0gPSB1c2VTdGF0ZSh0b2tlbnNWYWx1ZSk7XG5cblx0Y29uc3QgaGFuZGxlU3VibWl0ID0gKHRva2VuSWQsIHNlbGVjdGVkVG9rZW4pID0+IHtcblx0XHQvLyBnbyB0byB0aGUgbmV4dCBzdGVwIG9ubHkgaWYgYWxsIHRva2VucyBhcmUgc2V0XG5cdFx0bGV0IGdvVG9OZXh0U3RlcCA9IHRydWU7XG5cblx0XHR0b2tlbnNJc1NldFt0b2tlbklkXSA9IHRydWU7XG5cdFx0dG9rZW5zVmFsdWVbdG9rZW5JZF0gPSB7XG5cdFx0XHRzeW1ib2w6IHNlbGVjdGVkVG9rZW4ubGFiZWwsXG5cdFx0XHRhZGRyZXNzOiBzZWxlY3RlZFRva2VuLnZhbHVlLFxuXHRcdH07XG5cblx0XHRpZiAoc3RyYXRlZ3kgPT09IFwiYXJiaXRyYWdlXCIpIHtcblx0XHRcdHRva2Vuc0lzU2V0LnRva2VuQiA9IHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKHN0cmF0ZWd5ID09PSBcInBpbmdwb25nXCIgJiYgdG9rZW5JZCA9PT0gXCJ0b2tlbkFcIikge1xuXHRcdFx0Z29Ub05leHRTdGVwID0gZmFsc2U7XG5cdFx0fVxuY29uc29sZS5sb2coXCJ0b2tlbnNcIixcbntcblx0dmFsdWU6IHRva2Vuc1ZhbHVlLFxuXHRpc1NldDogdG9rZW5zSXNTZXQsXG59LClcblx0XHRjb25maWdTZXRWYWx1ZShcblx0XHRcdFwidG9rZW5zXCIsXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiB0b2tlbnNWYWx1ZSxcblx0XHRcdFx0aXNTZXQ6IHRva2Vuc0lzU2V0LFxuXHRcdFx0fSxcblx0XHRcdGdvVG9OZXh0U3RlcFxuXHRcdCk7XG5cdH07XG5cblx0Y29uc3QgaGFuZGxlVG9rZW5DaGFuZ2UgPSAodG9rZW5JZCwgdmFsdWUpID0+IHtcblx0XHRpZiAoIWlzTW91bnRlZFJlZi5jdXJyZW50KSByZXR1cm47XG5cdFx0Y29uc3Qgc2FuaXRpemVkVmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywgXCJcIik7XG5cdFx0Y29uc3QgZmlsdGVyZWRUb2tlbnMgPSB0b2tlbnNcblx0XHRcdC5tYXAoKHQpID0+ICh7XG5cdFx0XHRcdGxhYmVsOiB0LnN5bWJvbCxcblx0XHRcdFx0dmFsdWU6IHQuYWRkcmVzcyxcblx0XHRcdH0pKVxuXHRcdFx0LmZpbHRlcigodCkgPT5cblx0XHRcdFx0dC5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNhbml0aXplZFZhbHVlLnRvTG93ZXJDYXNlKCkpXG5cdFx0XHQpO1xuXHRcdGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuXHRcdFx0c2V0QXV0b2NvbXBsZXRlVG9rZW5zKGZpbHRlcmVkVG9rZW5zKTtcblx0XHRcdHNldFRlbXBUb2tlbnNWYWx1ZSh7XG5cdFx0XHRcdC4uLnRlbXBUb2tlbnNWYWx1ZSxcblx0XHRcdFx0W3Rva2VuSWRdOiB7XG5cdFx0XHRcdFx0c3ltYm9sOiBzYW5pdGl6ZWRWYWx1ZSxcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHRpZiAobmV0d29yayA9PT0gXCJcIikge1xuXHRcdHJldHVybiAoXG5cdFx0XHQ8Qm94PlxuXHRcdFx0XHQ8VGV4dD5cblx0XHRcdFx0XHRQbGVzZSBzZWxlY3QgPFRleHQgY29sb3I9XCJtYWdlbnRhXCI+bmV0d29yazwvVGV4dD4gZmlyc3QhXG5cdFx0XHRcdDwvVGV4dD5cblx0XHRcdDwvQm94PlxuXHRcdCk7XG5cdH1cblxuXHR1c2VFZmZlY3QoKCkgPT4ge1xuXHRcdC8vIGNoZWNrIGlmIHRva2Vucy5qc29uIGV4aXN0XG5cdFx0aWYgKGZzLmV4aXN0c1N5bmMoXCIuL3Rva2Vucy5qc29uXCIpKSB7XG5cdFx0XHRjb25zdCB0b2tlbnNGcm9tRmlsZSA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKFwiLi9jb25maWcuanNvblwiKSk7XG5cblx0XHRcdHRva2Vucy50b2tlbnNGcm9tRmlsZT8ubGVuZ3RoID4gMCAmJiBzZXRUb2tlbnModG9rZW5zRnJvbUZpbGUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRheGlvcy5nZXQoVE9LRU5fTElTVF9VUkxbbmV0d29ya10pLnRoZW4oKHJlcykgPT4ge1xuXHRcdFx0XHRpc01vdW50ZWRSZWYuY3VycmVudCAmJiBzZXRUb2tlbnMocmVzLmRhdGEpO1xuXHRcdFx0XHQvLyBzYXZlIHRva2VucyB0byB0b2tlbnMuanNvbiBmaWxlXG5cdFx0XHRcdGZzLndyaXRlRmlsZVN5bmMoXG5cdFx0XHRcdFx0XCIuL3RlbXAvdG9rZW5zLmpzb25cIixcblx0XHRcdFx0XHRKU09OLnN0cmluZ2lmeShyZXMuZGF0YSwgbnVsbCwgMilcblx0XHRcdFx0KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fSwgW10pO1xuXHR1c2VFZmZlY3QoKCkgPT4ge1xuXHRcdGlzTW91bnRlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcblx0XHRyZXR1cm4gKCkgPT4gKGlzTW91bnRlZFJlZi5jdXJyZW50ID0gZmFsc2UpO1xuXHR9LCBbXSk7XG5cblx0cmV0dXJuIChcblx0XHQ8Qm94IGZsZXhEaXJlY3Rpb249XCJjb2x1bW5cIj5cblx0XHRcdDxUZXh0PlxuXHRcdFx0XHRTZXQgdG9rZW5zIGZvciBZb3VyIHN0cmF0ZWd5LiBUaGVyZSBpc3tcIiBcIn1cblx0XHRcdFx0e3Rva2Vuc1xuXHRcdFx0XHRcdD8gY2hhbGsubWFnZW50YSh0b2tlbnMubGVuZ3RoKVxuXHRcdFx0XHRcdDogY2hhbGsueWVsbG93QnJpZ2h0KFwibG9hZGluZy4uLlwiKX17XCIgXCJ9XG5cdFx0XHRcdHRva2VucyBhdmFpbGFibGUuXG5cdFx0XHQ8L1RleHQ+XG5cdFx0XHQ8VGV4dCBjb2xvcj1cImdyYXlcIj5UeXBlIHRva2VuIHN5bWJvbCBhbmQgdXNlIGFycm93cyB0byBzZWxlY3Q8L1RleHQ+XG5cdFx0XHQ8Qm94IG1hcmdpbj17MX0gZmxleERpcmVjdGlvbj1cImNvbHVtblwiPlxuXHRcdFx0XHQ8VGV4dD5cblx0XHRcdFx0XHRUb2tlbiBBOntcIiBcIn1cblx0XHRcdFx0XHR7IXRva2Vuc0lzU2V0LnRva2VuQSA/IChcblx0XHRcdFx0XHRcdDxUZXh0IGNvbG9yPVwieWVsbG93QnJpZ2h0XCI+XG5cdFx0XHRcdFx0XHRcdDxUZXh0SW5wdXRcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZT17dGVtcFRva2Vuc1ZhbHVlLnRva2VuQS5zeW1ib2wudG9TdHJpbmcoKSB8fCBcIlwifVxuXHRcdFx0XHRcdFx0XHRcdG9uQ2hhbmdlPXsodG9rZW5TeW1ib2wpID0+XG5cdFx0XHRcdFx0XHRcdFx0XHRoYW5kbGVUb2tlbkNoYW5nZShcInRva2VuQVwiLCB0b2tlblN5bWJvbClcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXI9XCJVU0RDXCJcblx0XHRcdFx0XHRcdFx0Lz5cblx0XHRcdFx0XHRcdDwvVGV4dD5cblx0XHRcdFx0XHQpIDogKFxuXHRcdFx0XHRcdFx0PFRleHQgY29sb3I9XCJncmVlbkJyaWdodFwiIGJvbGQ+XG5cdFx0XHRcdFx0XHRcdHt0b2tlbnNWYWx1ZS50b2tlbkEuc3ltYm9sfVxuXHRcdFx0XHRcdFx0PC9UZXh0PlxuXHRcdFx0XHRcdCl9XG5cdFx0XHRcdDwvVGV4dD5cblxuXHRcdFx0XHQ8Qm94PlxuXHRcdFx0XHRcdHshdG9rZW5zSXNTZXQudG9rZW5BICYmXG5cdFx0XHRcdFx0XHR0ZW1wVG9rZW5zVmFsdWU/LnRva2VuQT8uc3ltYm9sPy5sZW5ndGggPiAxICYmIChcblx0XHRcdFx0XHRcdFx0PFNlbGVjdElucHV0XG5cdFx0XHRcdFx0XHRcdFx0aXRlbXM9e2F1dG9jb21wbGV0ZVRva2Vuc31cblx0XHRcdFx0XHRcdFx0XHRsaW1pdD17NH1cblx0XHRcdFx0XHRcdFx0XHRvblNlbGVjdD17KHRva2VuU3ltYm9sKSA9PiBoYW5kbGVTdWJtaXQoXCJ0b2tlbkFcIiwgdG9rZW5TeW1ib2wpfVxuXHRcdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdFx0KX1cblx0XHRcdFx0PC9Cb3g+XG5cblx0XHRcdFx0e3N0cmF0ZWd5ID09PSBcInBpbmdwb25nXCIgJiYgKFxuXHRcdFx0XHRcdDw+XG5cdFx0XHRcdFx0XHQ8VGV4dD5cblx0XHRcdFx0XHRcdFx0VG9rZW4gQjp7XCIgXCJ9XG5cdFx0XHRcdFx0XHRcdHt0b2tlbnNJc1NldC50b2tlbkEgJiYgIXRva2Vuc0lzU2V0LnRva2VuQiA/IChcblx0XHRcdFx0XHRcdFx0XHQ8VGV4dCBjb2xvcj1cInllbGxvd0JyaWdodFwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0PFRleHRJbnB1dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZT17dGVtcFRva2Vuc1ZhbHVlLnRva2VuQi5zeW1ib2wudG9TdHJpbmcoKSB8fCBcIlwifVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRvbkNoYW5nZT17KHRva2VuU3ltYm9sKSA9PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhhbmRsZVRva2VuQ2hhbmdlKFwidG9rZW5CXCIsIHRva2VuU3ltYm9sKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyPVwiQVJCXCJcblx0XHRcdFx0XHRcdFx0XHRcdC8+XG5cdFx0XHRcdFx0XHRcdFx0PC9UZXh0PlxuXHRcdFx0XHRcdFx0XHQpIDogKFxuXHRcdFx0XHRcdFx0XHRcdDxUZXh0IGNvbG9yPVwiZ3JlZW5CcmlnaHRcIiBib2xkPlxuXHRcdFx0XHRcdFx0XHRcdFx0e3Rva2Vuc1ZhbHVlLnRva2VuQi5zeW1ib2x9XG5cdFx0XHRcdFx0XHRcdFx0PC9UZXh0PlxuXHRcdFx0XHRcdFx0XHQpfVxuXHRcdFx0XHRcdFx0PC9UZXh0PlxuXHRcdFx0XHRcdFx0PEJveD5cblx0XHRcdFx0XHRcdFx0eyF0b2tlbnNJc1NldC50b2tlbkIgJiZcblx0XHRcdFx0XHRcdFx0XHR0ZW1wVG9rZW5zVmFsdWUudG9rZW5CPy5zeW1ib2w/Lmxlbmd0aCA+IDEgJiYgKFxuXHRcdFx0XHRcdFx0XHRcdFx0PFNlbGVjdElucHV0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGl0ZW1zPXthdXRvY29tcGxldGVUb2tlbnMuZmlsdGVyKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCh0KSA9PiB0LmxhYmVsICE9PSB0b2tlbnNWYWx1ZS50b2tlbkEuc3ltYm9sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCl9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxpbWl0PXs0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRvblNlbGVjdD17KHRva2VuU3ltYm9sKSA9PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhhbmRsZVN1Ym1pdChcInRva2VuQlwiLCB0b2tlblN5bWJvbClcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0Lz5cblx0XHRcdFx0XHRcdFx0XHQpfVxuXHRcdFx0XHRcdFx0PC9Cb3g+XG5cdFx0XHRcdFx0PC8+XG5cdFx0XHRcdCl9XG5cdFx0XHQ8L0JveD5cblx0XHQ8L0JveD5cblx0KTtcbn1cbm1vZHVsZS5leHBvcnRzID0gVG9rZW5zO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUM5QixNQUFNO0VBQUVDLEdBQUc7RUFBRUM7QUFBSyxDQUFDLEdBQUdGLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDcEMsTUFBTUcsYUFBYSxHQUFHSCxPQUFPLENBQUMsa0JBQWtCLENBQUM7QUFDakQsTUFBTTtFQUFFSSxVQUFVO0VBQUVDLFFBQVE7RUFBRUMsU0FBUztFQUFFQztBQUFPLENBQUMsR0FBR1AsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUNwRSxNQUFNO0VBQUVRLE9BQU8sRUFBRUM7QUFBWSxDQUFDLEdBQUdULE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUM1RCxNQUFNVSxLQUFLLEdBQUdWLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDOUIsTUFBTTtFQUFFUSxPQUFPLEVBQUVHO0FBQU0sQ0FBQyxHQUFHWCxPQUFPLENBQUMsT0FBTyxDQUFDO0FBQzNDLE1BQU07RUFBRVk7QUFBZSxDQUFDLEdBQUdaLE9B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
const React = require("react");
const {
  Box,
  Text
} = require("ink");
const {
  default: SelectInput
} = require("ink-select-input");
const {
  useContext,
  useState,
  useEffect,
  useRef
} = require("react");
const WizardContext = require("../WizardContext");
const {
  default: TextInput
} = require("ink-text-input");
const chalk = require("chalk");
const SLIPPAGE_STRATEGIES = [{
  label: "Profit Or Kill ðŸ—¡",
  value: "profitOrKill"
}, {
  label: "0.5%",
  value: 0.5
}, {
  label: "1%",
  value: 1
}, {
  label: "1.5%",
  value: 1.5
}, {
  label: "Custom %",
  value: "custom"
}];
const Indicator = ({
  label,
  value
}) => {
  const {
    config: {
      slippage: {
        value: selectedValue
      }
    }
  } = useContext(WizardContext);
  const isSelected = value == selectedValue;
  return /*#__PURE__*/React.createElement(Text, null, chalk[isSelected ? "greenBright" : "white"](`${label}`));
};
function Slippage() {
  const {
    configSetValue
  } = useContext(WizardContext);
  let isMountedRef = useRef(false);
  const [tempSlippageStrategy, setTempSlippageStrategy] = useState(SLIPPAGE_STRATEGIES[0]);
  const [customSlippage, setCustomSlippage] = useState("1");
  const [inputBorderColor, setInputBorderColor] = useState("gray");
  const handleSlippageStrategySelect = slippage => {
    const value = slippage.value;
    setTempSlippageStrategy(value);
    if (value !== "custom") configSetValue("slippage", value === "profitOrKill" ? value : Number(value));
  };
  const handleCustomSlippageChange = value => {
    const badChars = /[^0-9.]/g;
    badChars.test(value) ? setInputBorderColor("red") : setInputBorderColor("gray");
    const sanitizedValue = value.replace(badChars, "");
    setCustomSlippage(sanitizedValue);
    setTimeout(() => isMountedRef.current && setInputBorderColor("gray"), 100);
  };
  const handleCustomSlippageSubmit = () => {
    configSetValue("slippage", Number(customSlippage));
  };
  useEffect(() => {
    isMountedRef.current = true;
    return () => isMountedRef.current = false;
  }, []);
  return /*#__PURE__*/React.createElement(Box, {
    flexDirection: "column"
  }, /*#__PURE__*/React.createElement(Text, null, "Set ", /*#__PURE__*/React.createElement(Text, {
    color: "#cdadff"
  }, "slippage"), " strategy"), /*#__PURE__*/React.createElement(Box, {
    margin: 1
  }, /*#__PURE__*/React.createElement(SelectInput, {
    items: SLIPPAGE_STRATEGIES,
    itemComponent: Indicator,
    onSelect: handleSlippageStrategySelect
  })), tempSlippageStrategy === "custom" && /*#__PURE__*/React.createElement(Box, {
    flexDirection: "row",
    alignItems: "center"
  }, /*#__PURE__*/React.createElement(Text, null, "Custom slippage:"), /*#__PURE__*/React.createElement(Box, {
    borderStyle: "round",
    borderColor: inputBorderColor,
    marginLeft: 1
  }, /*#__PURE__*/React.createElement(TextInput, {
    value: customSlippage,
    onChange: handleCustomSlippageChange,
    onSubmit: handleCustomSlippageSubmit
  })), /*#__PURE__*/React.createElement(Text, null, "%")));
}
module.exports = Slippage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJCb3giLCJUZXh0IiwiZGVmYXVsdCIsIlNlbGVjdElucHV0IiwidXNlQ29udGV4dCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiV2l6YXJkQ29udGV4dCIsIlRleHRJbnB1dCIsImNoYWxrIiwiU0xJUFBBR0VfU1RSQVRFR0lFUyIsImxhYmVsIiwidmFsdWUiLCJJbmRpY2F0b3IiLCJjb25maWciLCJzbGlwcGFnZSIsInNlbGVjdGVkVmFsdWUiLCJpc1NlbGVjdGVkIiwiU2xpcHBhZ2UiLCJjb25maWdTZXRWYWx1ZSIsImlzTW91bnRlZFJlZiIsInRlbXBTbGlwcGFnZVN0cmF0ZWd5Iiwic2V0VGVtcFNsaXBwYWdlU3RyYXRlZ3kiLCJjdXN0b21TbGlwcGFnZSIsInNldEN1c3RvbVNsaXBwYWdlIiwiaW5wdXRCb3JkZXJDb2xvciIsInNldElucHV0Qm9yZGVyQ29sb3IiLCJoYW5kbGVTbGlwcGFnZVN0cmF0ZWd5U2VsZWN0IiwiTnVtYmVyIiwiaGFuZGxlQ3VzdG9tU2xpcHBhZ2VDaGFuZ2UiLCJiYWRDaGFycyIsInRlc3QiLCJzYW5pdGl6ZWRWYWx1ZSIsInJlcGxhY2UiLCJzZXRUaW1lb3V0IiwiY3VycmVudCIsImhhbmRsZUN1c3RvbVNsaXBwYWdlU3VibWl0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlNsaXBwYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuY29uc3QgeyBCb3gsIFRleHQgfSA9IHJlcXVpcmUoXCJpbmtcIik7XG5jb25zdCB7IGRlZmF1bHQ6IFNlbGVjdElucHV0IH0gPSByZXF1aXJlKFwiaW5rLXNlbGVjdC1pbnB1dFwiKTtcbmNvbnN0IHsgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gPSByZXF1aXJlKFwicmVhY3RcIik7XG5jb25zdCBXaXphcmRDb250ZXh0ID0gcmVxdWlyZShcIi4uL1dpemFyZENvbnRleHRcIik7XG5cbmNvbnN0IHsgZGVmYXVsdDogVGV4dElucHV0IH0gPSByZXF1aXJlKFwiaW5rLXRleHQtaW5wdXRcIik7XG5jb25zdCBjaGFsayA9IHJlcXVpcmUoXCJjaGFsa1wiKTtcblxuY29uc3QgU0xJUFBBR0VfU1RSQVRFR0lFUyA9IFtcblx0eyBsYWJlbDogXCJQcm9maXQgT3IgS2lsbCDwn5ehXCIsIHZhbHVlOiBcInByb2ZpdE9yS2lsbFwiIH0sXG5cdHsgbGFiZWw6IFwiMC41JVwiLCB2YWx1ZTogMC41IH0sXG5cdHsgbGFiZWw6IFwiMSVcIiwgdmFsdWU6IDEgfSxcblx0eyBsYWJlbDogXCIxLjUlXCIsIHZhbHVlOiAxLjUgfSxcblx0eyBsYWJlbDogXCJDdXN0b20gJVwiLCB2YWx1ZTogXCJjdXN0b21cIiB9LFxuXTtcblxuY29uc3QgSW5kaWNhdG9yID0gKHsgbGFiZWwsIHZhbHVlIH0pID0+IHtcblx0Y29uc3Qge1xuXHRcdGNvbmZpZzoge1xuXHRcdFx0c2xpcHBhZ2U6IHsgdmFsdWU6IHNlbGVjdGVkVmFsdWUgfSxcblx0XHR9LFxuXHR9ID0gdXNlQ29udGV4dChXaXphcmRDb250ZXh0KTtcblxuXHRjb25zdCBpc1NlbGVjdGVkID0gdmFsdWUgPT0gc2VsZWN0ZWRWYWx1ZTtcblxuXHRyZXR1cm4gPFRleHQ+e2NoYWxrW2lzU2VsZWN0ZWQgPyBcImdyZWVuQnJpZ2h0XCIgOiBcIndoaXRlXCJdKGAke2xhYmVsfWApfTwvVGV4dD47XG59O1xuXG5mdW5jdGlvbiBTbGlwcGFnZSgpIHtcblx0Y29uc3QgeyBjb25maWdTZXRWYWx1ZSB9ID0gdXNlQ29udGV4dChXaXphcmRDb250ZXh0KTtcblx0bGV0IGlzTW91bnRlZFJlZiA9IHVzZVJlZihmYWxzZSk7XG5cblx0Y29uc3QgW3RlbXBTbGlwcGFnZVN0cmF0ZWd5LCBzZXRUZW1wU2xpcHBhZ2VTdHJhdGVneV0gPSB1c2VTdGF0ZShcblx0XHRTTElQUEFHRV9TVFJBVEVHSUVTWzBdXG5cdCk7XG5cdGNvbnN0IFtjdXN0b21TbGlwcGFnZSwgc2V0Q3VzdG9tU2xpcHBhZ2VdID0gdXNlU3RhdGUoXCIxXCIpO1xuXHRjb25zdCBbaW5wdXRCb3JkZXJDb2xvciwgc2V0SW5wdXRCb3JkZXJDb2xvcl0gPSB1c2VTdGF0ZShcImdyYXlcIik7XG5cblx0Y29uc3QgaGFuZGxlU2xpcHBhZ2VTdHJhdGVneVNlbGVjdCA9IChzbGlwcGFnZSkgPT4ge1xuXHRcdGNvbnN0IHZhbHVlID0gc2xpcHBhZ2UudmFsdWU7XG5cdFx0c2V0VGVtcFNsaXBwYWdlU3RyYXRlZ3kodmFsdWUpO1xuXHRcdGlmICh2YWx1ZSAhPT0gXCJjdXN0b21cIilcblx0XHRcdGNvbmZpZ1NldFZhbHVlKFxuXHRcdFx0XHRcInNsaXBwYWdlXCIsXG5cdFx0XHRcdHZhbHVlID09PSBcInByb2ZpdE9yS2lsbFwiID8gdmFsdWUgOiBOdW1iZXIodmFsdWUpXG5cdFx0XHQpO1xuXHR9O1xuXG5cdGNvbnN0IGhhbmRsZUN1c3RvbVNsaXBwYWdlQ2hhbmdlID0gKHZhbHVlKSA9PiB7XG5cdFx0Y29uc3QgYmFkQ2hhcnMgPSAvW14wLTkuXS9nO1xuXHRcdGJhZENoYXJzLnRlc3QodmFsdWUpXG5cdFx0XHQ/IHNldElucHV0Qm9yZGVyQ29sb3IoXCJyZWRcIilcblx0XHRcdDogc2V0SW5wdXRCb3JkZXJDb2xvcihcImdyYXlcIik7XG5cdFx0Y29uc3Qgc2FuaXRpemVkVmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGJhZENoYXJzLCBcIlwiKTtcblx0XHRzZXRDdXN0b21TbGlwcGFnZShzYW5pdGl6ZWRWYWx1ZSk7XG5cdFx0c2V0VGltZW91dCgoKSA9PiBpc01vdW50ZWRSZWYuY3VycmVudCAmJiBzZXRJbnB1dEJvcmRlckNvbG9yKFwiZ3JheVwiKSwgMTAwKTtcblx0fTtcblxuXHRjb25zdCBoYW5kbGVDdXN0b21TbGlwcGFnZVN1Ym1pdCA9ICgpID0+IHtcblx0XHRjb25maWdTZXRWYWx1ZShcInNsaXBwYWdlXCIsIE51bWJlcihjdXN0b21TbGlwcGFnZSkpO1xuXHR9O1xuXG5cdHVzZUVmZmVjdCgoKSA9PiB7XG5cdFx0aXNNb3VudGVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuXHRcdHJldHVybiAoKSA9PiAoaXNNb3VudGVkUmVmLmN1cnJlbnQgPSBmYWxzZSk7XG5cdH0sIFtdKTtcblxuXHRyZXR1cm4gKFxuXHRcdDxCb3ggZmxleERpcmVjdGlvbj1cImNvbHVtblwiPlxuXHRcdFx0PFRleHQ+XG5cdFx0XHRcdFNldCA8VGV4dCBjb2xvcj1cIiNjZGFkZmZcIj5zbGlwcGFnZTwvVGV4dD4gc3RyYXRlZ3lcblx0XHRcdDwvVGV4dD5cblx0XHRcdDxCb3ggbWFyZ2luPXsxfT5cblx0XHRcdFx0PFNlbGVjdElucHV0XG5cdFx0XHRcdFx0aXRlbXM9e1NMSVBQQUdFX1NUUkFURUdJRVN9XG5cdFx0XHRcdFx0aXRlbUNvbXBvbmVudD17SW5kaWNhdG9yfVxuXHRcdFx0XHRcdG9uU2VsZWN0PXtoYW5kbGVTbGlwcGFnZVN0cmF0ZWd5U2VsZWN0fVxuXHRcdFx0XHQvPlxuXHRcdFx0PC9Cb3g+XG5cdFx0XHR7dGVtcFNsaXBwYWdlU3RyYXRlZ3kgPT09IFwiY3VzdG9tXCIgJiYgKFxuXHRcdFx0XHQ8Qm94IGZsZXhEaXJlY3Rpb249XCJyb3dcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG5cdFx0XHRcdFx0PFRleHQ+Q3VzdG9tIHNsaXBwYWdlOjwvVGV4dD5cblx0XHRcdFx0XHQ8Qm94XG5cdFx0XHRcdFx0XHRib3JkZXJTdHlsZT1cInJvdW5kXCJcblx0XHRcdFx0XHRcdGJvcmRlckNvbG9yPXtpbnB1dEJvcmRlckNvbG9yfVxuXHRcdFx0XHRcdFx0bWFyZ2luTGVmdD17MX1cblx0XHRcdFx0XHQ+XG5cdFx0XHRcdFx0XHQ8VGV4dElucHV0XG5cdFx0XHRcdFx0XHRcdHZhbHVlPXtjdXN0b21TbGlwcGFnZX1cblx0XHRcdFx0XHRcdFx0b25DaGFuZ2U9e2hhbmRsZUN1c3RvbVNsaXBwYWdlQ2hhbmdlfVxuXHRcdFx0XHRcdFx0XHRvblN1Ym1pdD17aGFuZGxlQ3VzdG9tU2xpcHBhZ2VTdWJtaXR9XG5cdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdDwvQm94PlxuXHRcdFx0XHRcdDxUZXh0PiU8L1RleHQ+XG5cdFx0XHRcdDwvQm94PlxuXHRcdFx0KX1cblx0XHQ8L0JveD5cblx0KTtcbn1cbm1vZHVsZS5leHBvcnRzID0gU2xpcHBhZ2U7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUM5QixNQUFNO0VBQUVDLEdBQUc7RUFBRUM7QUFBSyxDQUFDLEdBQUdGLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDcEMsTUFBTTtFQUFFRyxPQUFPLEVBQUVDO0FBQVksQ0FBQyxHQUFHSixPQUFPLENBQUMsa0JBQWtCLENBQUM7QUFDNUQsTUFBTTtFQUFFSyxVQUFVO0VBQUVDLFFBQVE7RUFBRUMsU0FBUztFQUFFQztBQUFPLENBQUMsR0FBR1IsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUNwRSxNQUFNUyxhQUFhLEdBQUdULE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUVqRCxNQUFNO0VBQUVHLE9BQU8sRUFBRU87QUFBVSxDQUFDLEdBQUdWLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUN4RCxNQUFNVyxLQUFLLEdBQUdYLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFFOUIsTUFBTVksbUJBQW1CLEdBQUcsQ0FDM0I7RUFBRUMsS0FBSyxFQUFFLG1CQUFtQjtFQUFFQyxLQUFLLEVBQUU7QUFBZSxDQUFDLEVBQ3JEO0VBQUVELEtBQUssRUFBRSxNQUFNO0VBQUVDLEtBQUssRUFBRTtBQUFJLENBQUMsRUFDN0I7RUFBRUQsS0FBSyxFQUFFLElBQUk7RUFBRUMsS0FBSyxFQUFFO0FBQUUsQ0FBQyxFQUN6QjtFQUFFRCxLQUFLLEVBQUUsTUFBTTtFQUFFQyxLQUFLLEVBQUU7QUFBSSxDQUFDLEVBQzdCO0VBQUVELEtBQUssRUFBRSxVQUFVO0VBQUVDLEtBQUssRUFBRTtBQUFTLENBQUMsQ0FDdEM7QUFFRCxNQUFNQyxTQUFTLEdBQUcsQ0FB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
const {
  useInput
} = require("ink");
const React = require("react");
const {
  useReducer
} = require("react");
const reducer = require("./reducer");
const WizardContext = require("./WizardContext");
const {
  CONFIG_INITIAL_STATE
} = require("../constants");
const WizardProvider = ({
  children
}) => {
  const [state, dispatch] = useReducer(reducer, CONFIG_INITIAL_STATE);
  useInput((input, key) => {
    if (input === "]") dispatch({
      type: "NEXT_STEP"
    });
    if (input === "[") dispatch({
      type: "PREV_STEP"
    });
    if (input === "h") dispatch({
      type: "TOGGLE_HELP"
    });
    if (key.escape) process.exit();
  });
  const configSetValue = (key, value, goToNextStep = true) => {
    dispatch({
      type: "CONFIG_SET",
      key,
      value
    });
    goToNextStep && dispatch({
      type: "NEXT_STEP"
    });
  };
  const configSwitchState = (key, value) => {
    dispatch({
      type: "CONFIG_SWITCH_STATE",
      key,
      value
    });
  };
  const providerValue = {
    ...state,
    configSetValue,
    configSwitchState
  };
  return /*#__PURE__*/React.createElement(WizardContext.Provider, {
    value: providerValue
  }, children);
};
module.exports = WizardProvider;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VJbnB1dCIsInJlcXVpcmUiLCJSZWFjdCIsInVzZVJlZHVjZXIiLCJyZWR1Y2VyIiwiV2l6YXJkQ29udGV4dCIsIkNPTkZJR19JTklUSUFMX1NUQVRFIiwiV2l6YXJkUHJvdmlkZXIiLCJjaGlsZHJlbiIsInN0YXRlIiwiZGlzcGF0Y2giLCJpbnB1dCIsImtleSIsInR5cGUiLCJlc2NhcGUiLCJwcm9jZXNzIiwiZXhpdCIsImNvbmZpZ1NldFZhbHVlIiwidmFsdWUiLCJnb1RvTmV4dFN0ZXAiLCJjb25maWdTd2l0Y2hTdGF0ZSIsInByb3ZpZGVyVmFsdWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiV2l6YXJkUHJvdmlkZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB1c2VJbnB1dCB9ID0gcmVxdWlyZShcImlua1wiKTtcbmNvbnN0IFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuY29uc3QgeyB1c2VSZWR1Y2VyIH0gPSByZXF1aXJlKFwicmVhY3RcIik7XG5jb25zdCByZWR1Y2VyID0gcmVxdWlyZShcIi4vcmVkdWNlclwiKTtcbmNvbnN0IFdpemFyZENvbnRleHQgPSByZXF1aXJlKFwiLi9XaXphcmRDb250ZXh0XCIpO1xuY29uc3QgeyBDT05GSUdfSU5JVElBTF9TVEFURSB9ID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcblxuY29uc3QgV2l6YXJkUHJvdmlkZXIgPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG5cdGNvbnN0IFtzdGF0ZSwgZGlzcGF0Y2hdID0gdXNlUmVkdWNlcihyZWR1Y2VyLCBDT05GSUdfSU5JVElBTF9TVEFURSk7XG5cblx0dXNlSW5wdXQoKGlucHV0LCBrZXkpID0+IHtcblx0XHRpZiAoaW5wdXQgPT09IFwiXVwiKSBkaXNwYXRjaCh7IHR5cGU6IFwiTkVYVF9TVEVQXCIgfSk7XG5cdFx0aWYgKGlucHV0ID09PSBcIltcIikgZGlzcGF0Y2goeyB0eXBlOiBcIlBSRVZfU1RFUFwiIH0pO1xuXHRcdGlmIChpbnB1dCA9PT0gXCJoXCIpIGRpc3BhdGNoKHsgdHlwZTogXCJUT0dHTEVfSEVMUFwiIH0pO1xuXHRcdGlmIChrZXkuZXNjYXBlKSBwcm9jZXNzLmV4aXQoKTtcblx0fSk7XG5cblx0Y29uc3QgY29uZmlnU2V0VmFsdWUgPSAoa2V5LCB2YWx1ZSwgZ29Ub05leHRTdGVwID0gdHJ1ZSkgPT4ge1xuXHRcdGRpc3BhdGNoKHsgdHlwZTogXCJDT05GSUdfU0VUXCIsIGtleSwgdmFsdWUgfSk7XG5cdFx0Z29Ub05leHRTdGVwICYmIGRpc3BhdGNoKHsgdHlwZTogXCJORVhUX1NURVBcIiB9KTtcblx0fTtcblxuXHRjb25zdCBjb25maWdTd2l0Y2hTdGF0ZSA9IChrZXksIHZhbHVlKSA9PiB7XG5cdFx0ZGlzcGF0Y2goeyB0eXBlOiBcIkNPTkZJR19TV0lUQ0hfU1RBVEVcIiwga2V5LCB2YWx1ZSB9KTtcblx0fTtcblxuXHRjb25zdCBwcm92aWRlclZhbHVlID0ge1xuXHRcdC4uLnN0YXRlLFxuXHRcdGNvbmZpZ1NldFZhbHVlLFxuXHRcdGNvbmZpZ1N3aXRjaFN0YXRlLFxuXHR9O1xuXHRyZXR1cm4gKFxuXHRcdDxXaXphcmRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtwcm92aWRlclZhbHVlfT5cblx0XHRcdHtjaGlsZHJlbn1cblx0XHQ8L1dpemFyZENvbnRleHQuUHJvdmlkZXI+XG5cdCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdpemFyZFByb3ZpZGVyO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQUVBO0FBQVMsQ0FBQyxHQUFHQyxPQUFPLENBQUMsS0FBSyxDQUFDO0FBQ25DLE1BQU1DLEtBQUssR0FBR0QsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUM5QixNQUFNO0VBQUVFO0FBQVcsQ0FBQyxHQUFHRixPQUFPLENBQUMsT0FBTyxDQUFDO0FBQ3ZDLE1BQU1HLE9BQU8sR0FBR0gsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNwQyxNQUFNSSxhQUFhLEdBQUdKLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUNoRCxNQUFNO0VBQUVLO0FBQXFCLENBQUMsR0FBR0wsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUV4RCxNQUFNTSxjQUFjLEdBQUcsQ0FBQztFQUFFQztBQUFTLENBQUMsS0FBSztFQUN4QyxNQUFNLENBQUNDLEtBQUssRUFBRUMsUUFBUSxDQUFDLEdBQUdQLFVBQVUsQ0FBQ0MsT0FBTyxFQUFFRSxvQkFBb0IsQ0FBQztFQUVuRU4sUUFBUSxDQUFDLENBQUNXLEtBQUssRUFBRUMsR0FBRyxLQUFLO0lBQ3hCLElBQUlELEtBQUssS0FBSyxHQUFHLEVBQUVELFFBQVEsQ0FBQztNQUFFRyxJQUFJLEVBQUU7SUFBWSxDQUFDLENBQUM7SUFDbEQsSUFBSUYsS0FBSyxLQUFLLEdBQUcsRUFBRUQsUUFBUSxDQUFDO01BQUVHLElBQUksRUFBRTtJQUFZLENBQUMsQ0FBQztJQUNsRCxJQUFJRixLQUFLLEtBQUssR0FBRyxFQUFFRCxRQUFRLENBQUM7TUFBRUcsSUFBSSxFQUFFO0lBQWMsQ0FBQyxDQUFDO0lBQ3BELElBQUlELEdBQUcsQ0FBQ0UsTUFBTSxFQUFFQyxPQUFPLENBQUNDLElBQUksRUFBRTtFQUMvQixDQUFDLENBQUM7RUFFRixNQUFNQyxjQUFjLEdBQUcsQ0FBQ0wsR0FBRyxFQUFFTSxLQUFLLEVBQUVDLFlBQVksR0FBRyxJQUFJLEtBQUs7SUFDM0RULFFBQVEsQ0FBQztNQUFFRyxJQUFJLEVBQUUsWUFBWTtNQUFFRCxHQUFHO01BQUVNO0lBQU0sQ0FBQyxDQUFDO0lBQzVDQyxZQUFZLElBQUlULFFBQVEsQ0FBQztNQUFFRyxJQUFJLEVBQUU7SUFBWSxDQUFDLENBQUM7RUFDaEQsQ0FBQztFQUVELE1BQU1PLGlCQUFpQixHQUFHLENBQUNSLEdBQUcsRUFBRU0sS0FBSyxLQUFLO0lBQ3pDUixRQUFRLENBQUM7TUFBRUcsSUFBSSxFQUFFLHFCQUFxQjtNQUFFRCxHQUFHO01BQUVNO0lBQU0sQ0FBQyxDQUFDO0VBQ3RELENBQUM7RUFFRCxNQUFNRyxhQUFhLEdBQUc7SUFDckIsR0FBR1osS0FBSztJQUNSUSxjQUFjO0lBQ2RHO0VBQ0QsQ0FBQztFQUNELG9CQUNDLG9CQUFDLGFBQWEsQ0FBQyxRQUFRO0lBQUMsS0FBSyxFQUFFQztFQUFjLEdBQzNDYixRQUFRLENBQ2U7QUFFM0IsQ0FBQztBQUVEYyxNQUFNLENBQUNDLE9BQU8sR0FBR2hCLGNBQWMifQ==
{"version":3,"file":"initialize.js","sourceRoot":"","sources":["../../../src/instructions/initialize.ts"],"names":[],"mappings":"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","sourcesContent":["import { struct, u8, u32 } from \"@solana/buffer-layout\";\nimport { TOKEN_PROGRAM_ID } from \"@solana/spl-token\";\nimport type { PublicKey } from \"@solana/web3.js\";\nimport { TransactionInstruction } from \"@solana/web3.js\";\nimport Decimal from \"decimal.js\";\n\nimport { decimalU64, decimalU128 } from \"../util/layout\";\nimport { TokenSwapInstruction } from \"./instruction\";\n\ninterface Data {\n  instruction: number;\n  nonce: number;\n  curveType: number;\n  fee: Decimal;\n  managerFee: Decimal;\n  tickSpace: number;\n  currentSqrtPrice: Decimal;\n  currentLiquity: Decimal;\n  feeGrowthGlobal0: Decimal;\n  feeGrowthGlobal1: Decimal;\n  managerFeeA: Decimal;\n  managerFeeB: Decimal;\n}\n\nconst DataLayout = struct<Data>([\n  u8(\"instruction\"),\n  u8(\"nonce\"),\n  u8(\"curveType\"),\n  decimalU64(\"fee\", 12),\n  decimalU64(\"managerFee\", 12),\n  u32(\"tickSpace\"),\n  decimalU128(\"currentSqrtPrice\", 12),\n  decimalU128(\"currentLiquity\"),\n  decimalU128(\"feeGrowthGlobal0\"),\n  decimalU128(\"feeGrowthGlobal1\"),\n  decimalU128(\"managerFeeA\"),\n  decimalU128(\"managerFeeB\"),\n]);\n\nexport const initializeInstruction = (\n  programId: PublicKey,\n  tokenSwapKey: PublicKey,\n  authority: PublicKey,\n  manager: PublicKey,\n  managerTokenA: PublicKey,\n  managerTokenB: PublicKey,\n  swapTokenA: PublicKey,\n  swapTokenB: PublicKey,\n  ticksKey: PublicKey,\n  positionsKey: PublicKey,\n  nonce: number,\n  curveType: number,\n  fee: Decimal,\n  managerFee: Decimal,\n  tickSpace: number,\n  currentSqrtPrice: Decimal\n): TransactionInstruction => {\n  const data = Buffer.alloc(DataLayout.span);\n  DataLayout.encode(\n    {\n      instruction: TokenSwapInstruction.Initialize,\n      nonce,\n      curveType,\n      fee,\n      managerFee,\n      tickSpace,\n      currentSqrtPrice,\n      currentLiquity: new Decimal(0),\n      feeGrowthGlobal0: new Decimal(0),\n      feeGrowthGlobal1: new Decimal(0),\n      managerFeeA: new Decimal(0),\n      managerFeeB: new Decimal(0),\n    },\n    data\n  );\n\n  const keys = [\n    { pubkey: tokenSwapKey, isSigner: false, isWritable: true },\n    { pubkey: authority, isSigner: false, isWritable: false },\n    { pubkey: manager, isSigner: false, isWritable: false },\n    { pubkey: managerTokenA, isSigner: false, isWritable: false },\n    { pubkey: managerTokenB, isSigner: false, isWritable: false },\n    { pubkey: swapTokenA, isSigner: false, isWritable: false },\n    { pubkey: swapTokenB, isSigner: false, isWritable: false },\n    { pubkey: ticksKey, isSigner: false, isWritable: true },\n    { pubkey: positionsKey, isSigner: false, isWritable: true },\n    { pubkey: TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },\n  ];\n\n  return new TransactionInstruction({\n    keys,\n    programId,\n    data,\n  });\n};\n"]}